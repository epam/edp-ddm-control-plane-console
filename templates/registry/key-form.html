{{ define "key-form" }}
    <h2>Дані про ключ</h2>

    <div class="rc-form-group">
        <label for="key-device-type">Тип носія</label>
        <select v-model="wizard.tabs.key.deviceType" id="key-device-type" name="key-device-type">
            <option {{ if eq .model.KeyDeviceType "file" }}selected="selected"{{end}}
                    value="file">Файловий носій</option>
            <option {{ if eq .model.KeyDeviceType "hardware" }}selected="selected"{{end}}
                    value="hardware">Апаратний носій</option>
        </select>
    </div>
    <div class="key-type-hardware key-type-section" v-show="wizard.tabs.key.deviceType == 'hardware'" v-cloak>
        <div class="rc-form-group"
             :class="{'error': wizard.tabs.key.hardwareData.remoteType == '' && wizard.tabs.key.beginValidation}">
            <label for="remote-type">Тип ключа</label>
            <input required type="text" @change="wizardKeyHardwareDataChanged" name="remote-type" id="remote-type"
                   v-model="wizard.tabs.key.hardwareData.remoteType" />
            <span v-if="wizard.tabs.key.hardwareData.remoteType == '' && wizard.tabs.key.beginValidation">Обов’язкове поле</span>
        </div>
        <div class="rc-form-group"
             :class="{'error': wizard.tabs.key.hardwareData.remoteKeyPWD == '' && wizard.tabs.key.beginValidation}">
            <label for="remote-key-pwd">Пароль ключа</label>
            <input required @change="wizardKeyHardwareDataChanged" type="password" id="remote-key-pwd"
                   name="remote-key-pwd" v-model="wizard.tabs.key.hardwareData.remoteKeyPWD" />
            <span v-if="wizard.tabs.key.hardwareData.remoteKeyPWD == '' && wizard.tabs.key.beginValidation">Обов’язкове поле</span>
        </div>
        <div class="rc-form-group"
             :class="{'error': wizard.tabs.key.hardwareData.remoteCaName == '' && wizard.tabs.key.beginValidation}">
            <label for="remote-ca-name">Ім'я АЦСК</label>
            <input @change="wizardKeyHardwareDataChanged" required type="text" id="remote-ca-name"
                   name="remote-ca-name" v-model="wizard.tabs.key.hardwareData.remoteCaName" />
            <span v-if="wizard.tabs.key.hardwareData.remoteCaName == '' && wizard.tabs.key.beginValidation">Обов’язкове поле</span>
        </div>
        <div class="rc-form-group"
             :class="{'error': wizard.tabs.key.hardwareData.remoteCaHost == '' && wizard.tabs.key.beginValidation}">
            <label for="remote-ca-host">Хост АЦСК</label>
            <input required @change="wizardKeyHardwareDataChanged" type="text" id="remote-ca-host" name="remote-ca-host"
                   v-model="wizard.tabs.key.hardwareData.remoteCaHost" />
            <span v-if="wizard.tabs.key.hardwareData.remoteCaHost == '' && wizard.tabs.key.beginValidation">Обов’язкове поле</span>
        </div>
        <div class="rc-form-group"
             :class="{'error': wizard.tabs.key.hardwareData.remoteCaPort == '' && wizard.tabs.key.beginValidation}">
            <label for="remote-ca-port">Порт АЦСК</label>
            <input required @change="wizardKeyHardwareDataChanged" type="number" id="remote-ca-port"
                   name="remote-ca-port" v-model="wizard.tabs.key.hardwareData.remoteCaPort" />
            <span v-if="wizard.tabs.key.hardwareData.remoteCaPort == '' && wizard.tabs.key.beginValidation">Обов’язкове поле</span>
        </div>
        <div class="rc-form-group"
             :class="{'error': wizard.tabs.key.hardwareData.remoteSerialNumber == '' && wizard.tabs.key.beginValidation}">
            <label for="remote-serial-number">Серійний номер пристрою</label>
            <input required @change="wizardKeyHardwareDataChanged" type="text" id="remote-serial-number"
                   name="remote-serial-number" v-model="wizard.tabs.key.hardwareData.remoteSerialNumber" />
            <span v-if="wizard.tabs.key.hardwareData.remoteSerialNumber == '' && wizard.tabs.key.beginValidation">Обов’язкове поле</span>
        </div>
        <div class="rc-form-group"
             :class="{'error': wizard.tabs.key.hardwareData.remoteKeyPort == '' && wizard.tabs.key.beginValidation}">
            <label for="remote-key-port">Порт ключа</label>
            <input required @change="wizardKeyHardwareDataChanged" type="number" id="remote-key-port"
                   name="remote-key-port" v-model="wizard.tabs.key.hardwareData.remoteKeyPort" />
            <span v-if="wizard.tabs.key.hardwareData.remoteKeyPort == '' && wizard.tabs.key.beginValidation">Обов’язкове поле</span>
        </div>
        <div class="rc-form-group"
             :class="{'error': wizard.tabs.key.hardwareData.remoteKeyHost == '' && wizard.tabs.key.beginValidation}">
            <label for="remote-key-host">Хост ключа</label>
            <input required type="text" @change="wizardKeyHardwareDataChanged" id="remote-key-host"
                   name="remote-key-host" v-model="wizard.tabs.key.hardwareData.remoteKeyHost" />
            <span v-if="wizard.tabs.key.hardwareData.remoteKeyHost == '' && wizard.tabs.key.beginValidation">Обов’язкове поле</span>
        </div>
        <div class="rc-form-group"
             :class="{'error': wizard.tabs.key.hardwareData.remoteKeyMask == '' && wizard.tabs.key.beginValidation}">
            <label for="remote-key-mask">Маска ключа</label>
            <input required @change="wizardKeyHardwareDataChanged" type="text" id="remote-key-mask"
                   name="remote-key-mask" v-model="wizard.tabs.key.hardwareData.remoteKeyMask" />
            <span v-if="wizard.tabs.key.hardwareData.remoteKeyMask == '' && wizard.tabs.key.beginValidation">Обов’язкове поле</span>
        </div>
        <div class="rc-form-group">
            <label for="remote-ini-config">INI конфігурація</label>
            <textarea rows="5" required id="remote-ini-config" v-model="wizard.tabs.key.hardwareData.iniConfig"
                      name="remote-ini-config"></textarea>
        </div>
    </div>
    <div class="key-type-file key-type-section" v-show="wizard.tabs.key.deviceType == 'file'" v-cloak>
        <div class="rc-form-group">
            <label for="key6">Файловий ключ (розширення .dat)</label>
            <input required type="file" name="key6" id="key6" accept=".dat" />
        </div>
        <div class="rc-form-group">
            <label for="sign-key-issuer">АЦСК, що видав ключ</label>
            <input type="text" id="sign-key-issuer" name="sign-key-issuer" required value="{{.model.SignKeyIssuer}}" />
        </div>
        <div class="rc-form-group">
            <label for="sign-key-pwd">Пароль до файлового ключа</label>
            <input required type="password" id="sign-key-pwd" name="sign-key-pwd" value="{{.model.SignKeyPwd}}" />
        </div>
    </div>
    <h3>Дані для перевірки ключа</h3>
    <hr />
    <div class="rc-form-group">
        <label for="ca-cert">Публічні сертифікати АЦСК (розширення .p7b)</label>
        <input required type="file" name="ca-cert" id="ca-cert" accept=".p7b" />
    </div>
    <div class="rc-form-group">
        <label for="ca-json">Перелік АЦСК (розширення .json)</label>
        <input required type="file" name="ca-json" id="ca-json" accept=".json" />
    </div>
    <h3>Перелік дозволених ключів <button type="button" class="allowed-keys-add" id="allowed-keys-add"
                                          @click="wizard.tabs.key.allowedKeys+=1">+</button>
    </h3>
    <hr />
    <div class="rc-form-group allowed-keys-body" id="allowed-keys-body">
        <div class="allowed-keys-row" v-for="n in wizard.tabs.key.allowedKeys">
            <input name="allowed-keys-issuer[]" class="allowed-keys-input allowed-keys-issuer" required
                   aria-label="key issuer" placeholder="Емітент ключа" type="text" />
            <input name="allowed-keys-serial[]" class="allowed-keys-input allowed-keys-serial" required
                   aria-label="key serial" placeholder="Серійний номер ключа" type="text" />
            <button v-if="n > 1" class="allowed-keys-remove-btn" type="button"
                    @click="wizard.tabs.key.allowedKeys-=1">-</button>
        </div>
    </div>
{{end}}